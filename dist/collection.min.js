!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.Collection=n()}(this,function(){"use strict";var t=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},n=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),e=Symbol("evaluate"),r=Symbol("cycle");return function(){function o(n){var e=this;t(this,o),this.instance=n,this.methods=[],this._items=[],Object.getOwnPropertyNames(n.prototype).forEach(function(t){"constructor"!==t&&"function"==typeof n.prototype[t]&&e.methods.push(t)})}return n(o,[{key:"add",value:function(t){if(!(t instanceof this.instance))throw new Error("Collection expects "+this.instance.prototype.constructor.name+"; got "+t.constructor.name);this._items.push(t)}},{key:"each",value:function(t){var n=this;if(!t)return this.methods.reduce(function(t,e){return t[e]=function(){return n._items.forEach(function(t){t[e]()}),t},t},{});this._items.forEach(t)}},{key:"generate",value:function(t,n){for(var o=this,i=function(t){var i=n?n.map(function(n){return function t(n,o){if(n[e])return n(o);if(n[r])return n[o%n.length];(n instanceof Array||n.__proto__===Object.prototype)&&(n=Object.assign({},n),Object.keys(n).forEach(function(e){n[e]=t(n[e],o)}));return n}(n,t)}):[];o.add(new(Function.prototype.bind.apply(o.instance,[null].concat(function(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}(i)))))},u=0;u<t;u++)i(u)}},{key:"query",value:function(t){return this.items.map(function(n){return n[t]})}},{key:"items",get:function(){return this._items}}],[{key:"eval",value:function(t){return t[e]=!0,t}},{key:"cycle",value:function(t){return t[r]=!0,t}},{key:"index",get:function(){return this.eval(function(t){return t})}}]),o}()});
