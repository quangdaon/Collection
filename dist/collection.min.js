!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Collection=e()}(this,function(){"use strict";var t=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),n=Symbol("evaluate"),r=Symbol("cycle"),o={evaluate:n,cycle:r};function i(t,e){t[o[e]]=!0}return function(){function o(e){var n=this;t(this,o),this.instance=e,this.methods=[],this._items=[],Object.getOwnPropertyNames(e.prototype).forEach(function(t){"constructor"!==t&&"function"==typeof e.prototype[t]&&n.methods.push(t)})}return e(o,[{key:"add",value:function(t){if(!(t instanceof this.instance))throw new Error("Collection expects "+this.instance.prototype.constructor.name+"; got "+t.constructor.name);this._items.push(t)}},{key:"each",value:function(t){var e=this;if(!t)return this.methods.reduce(function(t,n){return t[n]=function(){return e._items.forEach(function(t){t[n]()}),t},t},{});this._items.forEach(t)}},{key:"generate",value:function(t,e){for(var o=this,i=function(t){var i=e?e.map(function(e){return function t(e,o){return e[n]?e(o):e[r]?e[o%e.length]:((e instanceof Array||e.__proto__===Object.prototype)&&(e=Object.assign({},e),Object.keys(e).forEach(function(n){e[n]=t(e[n],o)})),e)}(e,t)}):[];o.add(new(Function.prototype.bind.apply(o.instance,[null].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(i)))))},u=0;u<t;u++)i(u)}},{key:"query",value:function(t){return this.items.map(function(e){return e[t]})}},{key:"items",get:function(){return this._items}}],[{key:"eval",value:function(t){return i(t,"evaluate"),t}},{key:"cycle",value:function(t){return i(t,"cycle"),t}},{key:"index",get:function(){return this.eval(function(t){return t})}}]),o}()});
